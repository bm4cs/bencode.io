---
layout: post
draft: true
title: "8-bit Computer"
slug: "oidc"
date: "2020-07-12 20:08:55"
lastmod: "2020-07-12 20:08:58"
comments: false
categories:
    - cpu
tags:
    - hardware
---

Based on the amazing guide put together by [Ben Eater](https://eater.net/8bit). Ben cites the SAP-1 CPU architecture as the design basis for the CPU, which originated from the book [Digital Computer Electonics](https://www.amazon.com.au/Digital-Computer-Electronics-Albert-Malvino/dp/0028005945) by Albert Paul Malvino.

> The SAP (Simple As Possible) computer has been designed for you, the beginner. Its purpose, to introduce the crucial ideas behind a CPUs operation without burying you in unnecessary detail.

# Clock Module

First up tackle the clock, the backbone of synchronising all digital operations within the CPU. The classic 555 timer IC has been selected, due to its versatility (its a fun chip to experiment with).

The clock provides adjustable speed (1Hz upto 200Hz), and a handy debugging _push button manual mode_ to advance a single clock cycle.

The 555 contains a couple of comparators which feed into an SR latch. The first _trigger_ comparator is set to a high voltage of 1.67v, and the second _threshold_ comparator set to a low voltage of 3.33v. When the 3.3v threshold is hit, a discharge transistor is enabled, which drains the capacitor (external to the 555 IC). The capacitor will continually drain and fill, based on this relationship. The drain and fill (duty cycle) rates of the capacitor are controlled controlled by resistors.

555 timer modes:

-   _Astable_ generates a constant stream of square waves
-   _Monostable_ provides two states, one stable (push button controlled), and one unstable variable stream of square waves
-   _Bistable_, aka a flip flop, stable in both states, output high and output low

## Dirty power

Using an oscilloscope will observe the transition from low to high is rather dirty. To overcome this, the data sheet recommends dropping in a 0.01uF capacitor between pin 5 and ground. In addition placing a 0.1uF capacitor across the positve and negative power pins. When the transistors state change, they immediately attempt to pull in as much current as they can to drive from low to high. At the nano second scale on the oscilloscope, can see this results in a slight lag in pulling the needed current, and also results in a voltage spike/overshoot. To feed this state transition with the needed current, filling up a capacitor (in this case, a 0.1uF across positve and negative pins) will provide an immediate pool of current for use, resulting in a faster low to high, and consequently less of an overshoot/spike.
