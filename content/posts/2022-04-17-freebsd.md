---
layout: post
draft: false
title: "From Linux to BSD in 2022"
slug: "bsd"
date: "2022-04-17 16:18:25+11:00"
lastmod: "2022-04-26 14:36:34+11:00"
comments: false
categories:
    - bsd
tags:
    - bsd
    - berkeley
    - freebsd
    - netbsd
    - openbsd
    - unix
    - linux
    - belllabs
    - multics
---

## Why

-   A family of open UNIX-like operating systems with lineage back to AT&T UNIX
-   Its a complete and cohesive system, not a distribution of disparate pieces
-   The BSD license is wonderfully permissive
-   Bill Joy (the father of Sun, BSD, `vi`, RISC)
-   [Marshall Kirk McKusick](https://www.mckusick.com/courses/)
-   ZFS, DTrace and Clang
-   It feels so damn neat, tidy and solid
-   I just want to!

## Things that feel different

My Linux biases are deep rooted. It's so fascinating to learn how the BSD's have gone about things differently.

-   No GNU core utils, break the addiction today and get comfortable with the BSD variants
-   use `sysrc` not systemd
-   `pkg` for packages (not `apt`, `pacman`, `yum`, `pkgtool`, `dnf`, `rpm`, `dpkg`, `emerge`, ...)
-   `cd /usr/ports && make search name=lsof` to search ports
-   `sysctl` not `/proc`
-   `kldload` not `modprobe`
-   `kldstat` not `lsmod`
-   `pciconf` not `lspci`
-   `/var/run/dmesg.boot` for boot logs
-   `geom disk list` not `lsblk`
-   `camcontrol devlist` and `geom disk list` not `lsblk`

## xorg and dwm

```
pkg install drm-kmod
pkg install xorg xf86-input-evdev xf86-video-intel
pw groupmod video -m ben || pw groupmod wheel -m ben
echo 'kern.vty=vt' >> /boot/loader.conf
pkg intall urwfonts
```

[twm]() comes along with the `xorg` infrastructure. Probably a cool piece of trivia why `twm`.

I use `dwm` with some patches. The official [suckless repo](https://git.suckless.org/) will need some freebsd patches; `config.mk` make sure includes and libs are picked up from `/usr/local/...` not straight out of `/usr/...`

The port `x11-wm/dwm` works great; is up-to date and has the freebsd patches.

Enable tearfree for intel graphics driver:

```
cat >/usr/local/etc/X11/xorg.conf.d/98-tearfree.conf <<EOF
Section "Device"
  Identifier  "Intel Graphics"
  Driver      "intel"
  Option "TearFree" "True"
EndSection
EOF
```

## powerd++

```sh
pkg install powerdxx
sysrc powerdxx_enable=YES
```

## Handy

-   [FreeBSD Handbook](https://docs.freebsd.org/en/books/handbook/basics/)
-   [FreeBSD Wiki](https://wiki.freebsd.org)
-   [Freshports](https://www.freshports.org/) the place for ports and most recent commits
-   [bsd-hardware.info](https://bsd-hardware.info/?view=computers&type=Notebook&vendor=Lenovo&model=ThinkPad+X260+%28All%29)
-   [papers.freebsd.org](https://papers.freebsd.org/) the collected works of the FreeBSD community as presented at various conferences and summits

## Talks

-   [Using boot environments at scale - by Allan Jude](https://papers.freebsd.org/2018/eurobsdcon/allanjude-bootenv_at_scale/)
-   [The ZFS Filesystem workshop - by Philip Paeps](https://www.youtube.com/watch?v=Hjpqa_kjCOI)

## Factoids

### - The term daemon comes from Greek mythology and represents an entity that is neither good nor evil, and which invisibly performs useful tasks. This is why the BSD mascot is the cheerful-looking daemon with sneakers and a pitchfork.
